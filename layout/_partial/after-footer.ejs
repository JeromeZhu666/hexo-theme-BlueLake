<% if (config.disqus_shortname){ %>
<script>
  var disqus_shortname = '<%= config.disqus_shortname %>';
  <% if (page.permalink){ %>
  var disqus_url = '<%= page.permalink %>';
  <% } %>
  (function(){
    var dsq = document.createElement('script');
    dsq.async = true;
    dsq.src = 'https://' + disqus_shortname + '.disqus.com/<% if (page.comments) { %>embed.js<% } else { %>count.js<% } %>';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<% } %>

<%- js('js/jquery-3.4.1.min.js') %>
<%- js('js/search.json.js') %>
<% if (theme.toc && theme.toc.enable){ %>
  <%- js('js/toctotop.js') %>
<% } else { %>
  <%- js('js/totop.js') %>
<% } %>
<% if (theme.fancybox){ %>
  <%- js('fancybox/jquery.fancybox.min.js') %>
<% } %>
<% if (theme.busuanzi){ %>
  <%- js('https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js') %>
<% } %>
<% if (theme.share.local_share){ %>
  <%- js('localshare/js/social-share.js') %>
  <%- js('localshare/js/qrcode.js') %>
<% } %>
<% if (theme.share.baidu_share){ %>
  <script>
    window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","weixin","tsina","qzone","linkedin","fbook","twi","print","renren","sqq","evernotecn","bdysc","tqq","tqf","bdxc","kaixin001","tieba","douban","bdhome","thx","ibaidu","meilishuo","mogujie","diandian","huaban","duitang","hx","fx","youdao","sdo","qingbiji","people","xinhua","mail","isohu","yaolan","wealink","ty","iguba","h163","copy"],"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"]}};with(document)0[(getElementsByTagName('head')[0]||head).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
  </script>
<% } %>


<%- js('js/script') %>
<%- partial('gauges-analytics') %>

<% if(theme.valine.enable && theme.valine.appId && theme.valine.appKey){ %>
  <%- js('https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js') %>
  <script>
    var GUEST_INFO = ['nick','mail','link'];
    var guest_info = '<%= theme.valine.guest_info %>'.split(',').filter(function(item){
        return GUEST_INFO.indexOf(item) > -1
    });
    var notify = '<%= theme.valine.notify %>' == true;
    var verify = '<%= theme.valine.verify %>' == true;
    new Valine({
        el: '.vcomment',
        notify: notify,
        verify: verify,
        appId: "<%= theme.valine.appId %>",
        appKey: "<%= theme.valine.appKey %>",
        placeholder: "<%= theme.valine.placeholder %>",
        pageSize:'<%= theme.valine.pageSize %>',
        avatar:'<%= theme.valine.avatar %>',
        lang:'<%= theme.valine.lang %>'
    });
  </script>
<% } %>
  
<% if (theme.gitalk.enable && theme.gitalk.client_id && theme.gitalk.client_secret){ %>
  <%- js('https://unpkg.com/gitalk/dist/gitalk.min.js') %>
  <%- js('//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js') %>
  <script>
    var gitalk = new Gitalk({
      clientID: '#{theme.comment.gitalk.client_id}',
      clientSecret: '#{theme.comment.gitalk.client_secret}',
      repo: '#{theme.comment.gitalk.repo}',
      owner: '#{theme.comment.gitalk.owner}',
      admin: ['#{theme.comment.gitalk.admin}'],
      id: md5(window.location.pathname),
      distractionFreeMode: false,
      language: '#{theme.comment.gitalk.language}',
      pagerDirection: '#{theme.comment.gitalk.pagerDirection}'
    });
    gitalk.render('comments');
  </script>
<% } %>
 